<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
   <title>Unified Payments Demo no. 1</title>
</head>

<body>
<nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark">
    <a class="navbar-brand" href="/">Unified Payment</a>
</nav>

<main class="container" role="main">
    <div class="py-5 text-center">
        <h2>Request Capture Context</h2>
        <p class="lead">
            Once you are ready to capture sensitive information, you need to request Capture Context from Flex API.
            The JSON payload below was created based on your intent from previous step.
            Once you send authenticated request to CyberSource Flex API /flex/v2/sessions service,
            it will produce JWT that can later be used to create encrypted tokenization request.
        </p>
    </div>

    <form action="/forms/request-capture-context" method="post">
        <div class="form-group">
            <label for="ta">Request Payload</label>
            <textarea class="form-control" id="ta" name="capture-context-request" rows="15" th:text="${ccr}">{capture_context_request}</textarea>
        </div>
        <div>
            <p>Note that this is an authenticated call. This <a href="https://github.com/MechanisedOrigin/flex-v2-java-direct-use-sample/blob/main/src/main/java/com/cybersource/samples/services/FlexApiHeaderAuthenticator.java" target="_blank">code</a> demonstrates how to add relevant HTTP Signature header to make successful request to Flex API service.</p>
        </div>
        <div class="form-group">
            <button class="btn btn-success" type="submit">Request Capture Context</button>
            <a class="btn btn-primary" href="/index.html">Home</a>
        </div>
    </form>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
</body>
</html>